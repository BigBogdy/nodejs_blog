<%- include('../partials/header'); -%>
<div class="blog-container">
  <div class="col-md-12">

    <div class="jumbotron  jumbotron-fluid post-container latest-posts-container">
      <div class="container">
        <button class="delete" data-id="<%= post.id %>"><i class="fa-solid fa-trash" data-id="<%= post.id %>"></i></button>
        <a href="/edit/<%= post.id %>" class="edit" >
          <i class="fa-solid fa-pen-to-square"></i>
        </a>
        <h1 class="display-4 post-title latest-posts-hero post-title-mod">
          <div><%= post.title %></div>
          <hr>
        </h1>
      </div>
    </div>

    <div class="jumbotron  jumbotron-fluid post-container">
      <div class="container">
        <p class="lead post-content">
            <div><%= post.content %></div>
        </p>
        <div class="row post-details">
          <label class="post-published">Published On <span class="date">
              <%= post.createdAt.toLocaleDateString() %>
            </span></label>
        </div>
      </div>
    </div>


  </div>
</div>

<script>
  document.addEventListener('click', (e) => {
    const id = e.target?.dataset?.id || null
    if(id) {
      fetch(`/posts/${id}`, {
        method: 'DELETE', 
      }).then(() => {
        window.location.href = '/'
      })
    }
  })
</script>
